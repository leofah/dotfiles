#!/usr/bin/env sh

# git aliases
alias g='git'
alias gs='git status'
alias gi='git init'
alias ga='git add'
alias ga.='git add .'
alias gc='git commit -m'
alias gca='git commit -a -m'
alias gpl='git pull'
alias gp='git push'
alias gf='git fetch'
alias gm='git merge'
alias gb='git branch'
alias gl='git log'
alias gd='git diff'
alias gch='git checkout'

# Dotfiles handling (now with yadm, its just the same, but the aliases are already given)

alias ip='ip --color=auto'
alias pip-update='pip list --outdated --format=freeze | grep -v '^\-e' | cut -d = -f 1  | xargs -n1 pip install -U'


# run alias commands with sudo
alias sudo='sudo '

alias o='rifle' # rangers file opener
alias v='nvim'
alias vi='nvim'
alias vim='nvim'
alias vimdiff='nvim -d'

# quality of life
pingd () { # ping the default gateway
  ping $(ip route | awk '/^default via/ { print $3 ; exit }')
}
logdate () { # prepend the current date before each line
    while IFS= read -r line; do
        printf '%s %s\n' "$(date +%Y-%m-%d\ %H:%M:%S)" "$line";
    done
}
tryping () {
    local timeout=1
    local interval=1
    local srv="$1"
    local i=0
    while true
    do
        ping -q -W "$timeout" -c1 "$srv" > /dev/null
        if [ $? -eq 0 ]
        then
            notify-send "$srv is back!"
            tput bel
            echo -e "$srv is back!"
            break
        fi
        echo -en "\rtry $i "
        sleep "$interval"
        i=$((i + 1))
    done
}

# SSN
alias age-knecht='echo "https://daten.stusta.de/files/008300/js.webm" | nc knecht.stusta.de 60601'
alias hymne-knecht='echo "https://dokumente.stustanet.de/hymne.mp3" | nc knecht.stusta.de 60601'
alias xonotic-knecht='echo "https://daten.stusta.de/files/013253/music/xonotic/xonotic_cat.ogg" | nc knecht.stusta.de 60601'
alias server-knecht='echo "https://daten.stusta.de/files/013253/PURE_RELAXATION-SERVER_SOUNDSbyHetzner.mp4" | nc knecht.stusta.de 60601'
say () {
    curl --data-urlencode "phrase=$*" https://bot.stusta.de/speak
}


# scan pdf
alias scan='utsushi scan --no-interface --image-format=PDF --resolution=200 --scan-area ISO/A4/Portrait'
alias scan_duplex='scan --duplex --doc-source=ADF'
alias scan_simplex='scan --doc-source=ADF'

alias pypy='pypy3'
alias sft-ran-vpn='pushd /home/leo/.config/vpn/sft.ran/; sudo openvpn --daemon --config sftnet.ovpn; popd'
